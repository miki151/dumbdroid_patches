From e362fe4b08e41e1025c377055bbdd9af0cb56550 Mon Sep 17 00:00:00 2001
From: Michal Brzozowski <miki@extremic.com>
Date: Thu, 24 Jul 2025 09:08:13 +0200
Subject: [PATCH 06/13] Launch dialer when a number key is pressed while in
 home

Change-Id: I343b11a95406492b69e8856a2a1828214eed01e7
---
 .../launcher3/util/KeyboardShortcutsDelegate.java | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/src/com/android/launcher3/util/KeyboardShortcutsDelegate.java b/src/com/android/launcher3/util/KeyboardShortcutsDelegate.java
index e4e0bae06d..ce100d985b 100644
--- a/src/com/android/launcher3/util/KeyboardShortcutsDelegate.java
+++ b/src/com/android/launcher3/util/KeyboardShortcutsDelegate.java
@@ -20,6 +20,8 @@ import static com.android.launcher3.LauncherState.NORMAL;
 import static com.android.launcher3.LauncherState.OVERVIEW;
 import static com.android.launcher3.accessibility.LauncherAccessibilityDelegate.getSupportedActions;
 
+import android.content.Intent;
+import android.net.Uri;
 import android.util.Log;
 import android.view.KeyEvent;
 import android.view.KeyboardShortcutGroup;
@@ -111,6 +113,19 @@ public class KeyboardShortcutsDelegate {
      * @see android.view.KeyEvent
      */
     public Boolean onKeyDown(int keyCode, KeyEvent event) {
+        if (event.hasNoModifiers() && event.getRepeatCount() == 0
+                && mLauncher.isInState(NORMAL)) {
+            int unicode = event.getUnicodeChar();
+            if (unicode > 0) {
+                char c = (char) unicode;
+                if (Character.isDigit(c) || c == '*' || c == '#') {
+                    Intent intent = new Intent(Intent.ACTION_DIAL,
+                            Uri.parse("tel:" + Uri.encode(String.valueOf(c))));
+                    mLauncher.startActivitySafely(null, intent, null);
+                    return true;
+                }
+            }
+        }
         // Ignore escape if pressed in conjunction with any modifier keys.
         if (keyCode == KeyEvent.KEYCODE_ESCAPE && event.hasNoModifiers()) {
             AbstractFloatingView topView = AbstractFloatingView.getTopOpenView(mLauncher);
-- 
2.34.1

