From a5ab7616e6447408a2c691f8b90406a05cc1f5e3 Mon Sep 17 00:00:00 2001
From: Michal Brzozowski <miki@extremic.com>
Date: Thu, 6 Nov 2025 13:44:02 +0100
Subject: [PATCH 1/3] Add Doov overlay

Change-Id: Ib8644b921a56acc674e67c5d5c4c167494c670cf
---
 Doov/R77Pro/Android.mk                |   8 ++
 Doov/R77Pro/AndroidManifest.xml       |  11 +++
 Doov/R77Pro/res/xml/power_profile.xml | 125 ++++++++++++++++++++++++++
 3 files changed, 144 insertions(+)
 create mode 100644 Doov/R77Pro/Android.mk
 create mode 100644 Doov/R77Pro/AndroidManifest.xml
 create mode 100644 Doov/R77Pro/res/xml/power_profile.xml

diff --git a/Doov/R77Pro/Android.mk b/Doov/R77Pro/Android.mk
new file mode 100644
index 0000000..7885449
--- /dev/null
+++ b/Doov/R77Pro/Android.mk
@@ -0,0 +1,8 @@
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+LOCAL_MODULE_TAGS := optional
+LOCAL_PACKAGE_NAME := treble-overlay-doov-r77pro
+LOCAL_MODULE_PATH := $(TARGET_OUT_PRODUCT)/overlay
+LOCAL_IS_RUNTIME_RESOURCE_OVERLAY := true
+LOCAL_PRIVATE_PLATFORM_APIS := true
+include $(BUILD_PACKAGE)
diff --git a/Doov/R77Pro/AndroidManifest.xml b/Doov/R77Pro/AndroidManifest.xml
new file mode 100644
index 0000000..9050564
--- /dev/null
+++ b/Doov/R77Pro/AndroidManifest.xml
@@ -0,0 +1,11 @@
+<manifest xmlns:android="http://schemas.android.com/apk/res/android"
+        package="me.phh.treble.overlay.doov.r77pro"
+        android:versionCode="1"
+        android:versionName="1.0">
+    <overlay
+        android:targetPackage="android"
+        android:requiredSystemPropertyName="ro.vendor.build.fingerprint"
+        android:requiredSystemPropertyValue="+DOOV/DOOV/DOOV*"
+        android:priority="242"
+        android:isStatic="true" />
+</manifest>
diff --git a/Doov/R77Pro/res/xml/power_profile.xml b/Doov/R77Pro/res/xml/power_profile.xml
new file mode 100644
index 0000000..1facfcf
--- /dev/null
+++ b/Doov/R77Pro/res/xml/power_profile.xml
@@ -0,0 +1,125 @@
+<?xml version="1.0" encoding="utf-8"?>
+<device name="Android">
+    <!-- Display current draw estimates (mA) -->
+    <item name="ambient.on.display0">15</item>
+    <item name="screen.on.display0">85</item>
+    <item name="screen.full.display0">190</item>
+    <!-- Legacy keys kept to avoid framework warnings -->
+    <item name="ambient.on">15</item>
+    <item name="screen.on">85</item>
+    <item name="screen.full">190</item>
+
+    <!-- Bluetooth radio -->
+    <item name="bluetooth.on">5</item>
+    <item name="bluetooth.active">60</item>
+    <item name="bluetooth.controller.idle">2</item>
+    <item name="bluetooth.controller.rx">35</item>
+    <item name="bluetooth.controller.tx">35</item>
+    <item name="bluetooth.controller.voltage">3.7</item>
+
+    <!-- Wi-Fi radio -->
+    <item name="wifi.on">4</item>
+    <item name="wifi.active">75</item>
+    <item name="wifi.scan">35</item>
+    <item name="wifi.controller.idle">2.2</item>
+    <item name="wifi.controller.rx">65</item>
+    <item name="wifi.controller.tx">72</item>
+    <array name="wifi.controller.tx_levels">
+        <value>45</value>
+        <value>72</value>
+        <value>110</value>
+    </array>
+    <item name="wifi.controller.voltage">3.8</item>
+    <array name="wifi.batchedscan">
+        <value>0.0005</value>
+        <value>0.005</value>
+        <value>0.05</value>
+        <value>0.5</value>
+        <value>5</value>
+    </array>
+
+    <!-- Media -->
+    <item name="audio">80</item>
+    <item name="video">110</item>
+
+    <!-- Camera -->
+    <item name="camera.flashlight">180</item>
+    <item name="camera.avg">520</item>
+
+    <!-- Location -->
+    <item name="gps.on">40</item>
+    <array name="gps.signalqualitybased">
+        <value>35</value>
+        <value>55</value>
+        <value>80</value>
+    </array>
+    <item name="gps.voltage">3.7</item>
+
+    <!-- Cellular radio (legacy path) -->
+    <item name="radio.active">210</item>
+    <item name="radio.scanning">30</item>
+    <array name="radio.on">
+        <value>5</value>
+        <value>4</value>
+    </array>
+
+    <!-- Cellular radio (modern controller path) -->
+    <item name="modem.controller.sleep">1</item>
+    <item name="modem.controller.idle">6</item>
+    <item name="modem.controller.rx">110</item>
+    <array name="modem.controller.tx">
+        <value>135</value>
+        <value>150</value>
+        <value>170</value>
+        <value>210</value>
+        <value>250</value>
+    </array>
+    <item name="modem.controller.voltage">3.85</item>
+
+    <!-- CPU -->
+    <item name="cpu.suspend">6</item>
+    <item name="cpu.idle">2.5</item>
+    <array name="cpu.active">
+        <value>10</value>
+        <value>18</value>
+    </array>
+    <array name="cpu.clusters.cores">
+        <value>4</value>
+        <value>4</value>
+    </array>
+    <array name="cpu.speeds.cluster0">
+        <value>500000</value>
+        <value>1100000</value>
+        <value>1500000</value>
+        <value>1800000</value>
+    </array>
+    <array name="cpu.active.cluster0">
+        <value>9</value>
+        <value>14</value>
+        <value>20</value>
+        <value>28</value>
+    </array>
+    <array name="cpu.speeds.cluster1">
+        <value>500000</value>
+        <value>1300000</value>
+        <value>2000000</value>
+        <value>2300000</value>
+    </array>
+    <array name="cpu.active.cluster1">
+        <value>15</value>
+        <value>24</value>
+        <value>33</value>
+        <value>44</value>
+    </array>
+    <item name="cpu.cluster_power.cluster0">6</item>
+    <item name="cpu.cluster_power.cluster1">9</item>
+
+    <!-- Memory controller -->
+    <array name="memory.bandwidths">
+        <value>22.7</value>
+        <value>50</value>
+    </array>
+
+    <!-- Battery capacity (mAh) -->
+    <item name="battery.capacity">2950</item>
+</device>
-- 
2.34.1

